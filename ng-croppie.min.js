!function(){"use strict";angular.module("ngCroppie",[]).directive("ngCroppie",["$timeout",function(e){return{restrict:"AE",scope:{src:"=",rotation:"=",viewport:"=",boundry:"=",type:"@",result:"=",zoom:"@",mousezoom:"@",zoomslider:"@",exif:"@",orientation:"@",update:"=",ngModel:"=",mobile:"@"},link:function(o,n,t){o.viewport=o.viewport||{w:null,h:null},o.boundry=o.boundry||{w:null,h:null},o.result=o.result||"canvas","true"===o.mobile?(o.viewport.w=250,o.viewport.h=250,o.boundry.w=300,o.boundry.h=300):(o.viewport.w=o.viewport.w||300,o.viewport.h=o.viewport.h||300,o.boundry.w=o.boundry.w||400,o.boundry.h=o.boundry.h||400,o.boundry.enforce=o.boundry.enforce||!0),o.viewport.w>o.boundry.w&&(o.viewport.w=o.boundry.w),o.viewport.h>o.boundry.h&&(o.viewport.h=o.boundry.h);var r="true"===o.zoom||void 0===o.zoom,i="true"===o.mousezoom||void 0===o.mousezoom,u="true"===o.zoomslider||void 0===o.zoomslider,l={viewport:{width:o.viewport.w,height:o.viewport.h,type:o.type||"square"},boundary:{width:o.boundry.w,height:o.boundry.h},enforceBoundary:o.boundry.enforce,enableZoom:r,mouseWheelZoom:i,showZoomer:u,enableExif:o.exif,enableOrientation:o.orientation};void 0!=o.update&&(l.update=o.update);var d,a=new Croppie(n[0],l),c=angular.element(n[0])[0],s=angular.element(n[0].getElementsByClassName("cr-boundary"))[0].getBoundingClientRect();c.addEventListener("mousedown",function(){d=window.setInterval(function(){a.result(o.result).then(function(e){o.$apply(function(){o.ngModel=e})})},250)},!1),i&&c.addEventListener("wheel",function(e){console.log("Wheel event called"),e.preventDefault(),e.clientX>s.left&&e.clientX<s.right&&e.clientY<s.bottom&&e.clientY>s.top&&a.result(o.result).then(function(e){o.$apply(function(){o.ngModel=e})})},!1),c.addEventListener("mouseup",function(){clearInterval(d)},!1),c.addEventListener("mouseleave",function(){clearInterval(d)},!1),c.addEventListener("mouseout",function(){clearInterval(d)},!1),o.$on("$destroy",function(e){clearInterval(d)}),o.$watch("rotation",function(e,n){if("false"===o.orientation||void 0==o.orientation)throw"ngCroppie: Cannot rotate without 'orientation' option";a.rotate(e-n),a.result(o.result).then(function(e){o.$apply(function(){o.ngModel=e})})}),o.$watch("src",function(n,t){void 0!=o.src&&(a.bind(o.src),e(function(){a.result(o.result).then(function(e){o.$apply(function(){o.ngModel=e})})},250))})}}}])}();